(function(t,i){if(typeof define==="function"&&define.amd){define(["exports"],function(e){t.VoseAliasMethod=i})}else if(typeof exports!=="undefined"){exports.VoseAliasMethod=i}else{t.VoseAliasMethod=i}})(this,function(){t.prototype.probabilityLength=0;t.prototype.probability=[];t.prototype.alias=[];function t(t){this.init(t);return this}var i=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)};var e=function(t){var i=t.reduce(function(t,i){return t+i});if(i>1){t=t.map(function(t){return t/i})}else if(i<1){t.push(1-i)}return t};t.prototype.init=function(t){var i,r,n,o,s,h;if(t===null){throw new Error("Undefined Probabilities Array")}this.probabilityLength=t.length;i=1/this.probabilityLength;for(o=0;o<this.probabilityLength;o++){if(isNaN(parseFloat(t[o]))||!isFinite(t[o])){throw new Error("All elements in probabilities array must be numeric")}}t=t.slice(0);t=e(t);this.probability=[];this.alias=[];r=[];n=[];for(o=0;o<t.length;o++){t[o]>=i?n.push(o):r.push(o)}while(r.length>0&&n.length>0){s=r.shift();h=n.shift();this.probability[s]=t[s]*this.probabilityLength;this.alias[s]=h;t[h]=t[h]+t[s]-i;t[h]>=i?n.push(h):r.push(h)}while(n.length!==0){this.probability[n.shift()]=1}while(r.length!==0){this.probability[r.shift()]=1}};t.prototype.next=function(){var t,e;t=i(0,this.probabilityLength-1);e=Math.random()<this.probability[t];return e?t:this.alias[t]};return t}());